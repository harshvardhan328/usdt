<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wallet Connect Demo</title>
</head>
<body>
  <h2>Wallet Connect Demo</h2>
  <button id="connectBtn">Connect Wallet</button>
  <p id="status"></p>

  <script>
    const connectBtn = document.getElementById('connectBtn');
    const status = document.getElementById('status');

    connectBtn.onclick = async () => {
      if (window.ethereum) {
        try {
          // Request account access if needed
          const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
          const account = accounts[0];
          status.innerText = `Connected account: ${account}`;
          console.log("Connected account:", account);
          
          // Optional: Check network
          const chainId = await window.ethereum.request({ method: 'eth_chainId' });
          console.log('Connected chain ID:', chainId);
          if(chainId !== '0x5') { // '0x5' is Goerli testnet
            status.innerText += "\nPlease switch your MetaMask network to Goerli testnet.";
          }
        } catch (error) {
          if (error.code === 4001) {
            // EIP-1193 userRejectedRequest error
            status.innerText = 'User rejected connection request.';
          } else {
            console.error(error);
            status.innerText = 'Error connecting wallet.';
          }
        }
      } else {
        alert('MetaMask or compatible wallet extension not detected!');
      }
    };
  </script>
</body>
</html>
